oracle
======

server
------
::

    yum -y install libaio bc

::

    cd /usr/local/lib
    wget http://ftp.cs.stanford.edu/pub/fedora/6/i386/oracle-xe-univ-10.2.0.1-1.0.i386.rpm

    rpm -ivh oracle-xe-univ-10.2.0.1-1.0.i386.rpm

::

    # Oracle Database 10g Express Edition requires 996 MB of swap space.
    dd if=/dev/zero of=/tmp/swapfile bs=1024 count=256000
    chmod 660 /tmp/swapfile
    mkswap /tmp/swapfile
    swapon /tmp/swapfile

.. index:: /etc/profile.d/oracle.sh

::

    /etc/init.d/oracle-xe configure

    echo '. /usr/lib/oracle/xe/app/oracle/product/10.2.0/server/bin/oracle_env.sh' \
    > /etc/profile.d/oracle.sh

::

    alter profile default limit
      failed_login_attempts unlimited
      password_lock_time unlimited
      password_life_time unlimited
      password_grace_time unlimited;

    create user d563 identified by d563 default tablespace users;

    grant connect to d563;
    grant resource to d563;
    grant dba to d563;

    grant select,insert,update,delete on user1.table1 to d563;

    create or replace synonym d563.table1 for user1.table1;

    create table table1(
      id number(9.0),
      name varchar2(6),
      image blob, 
      date_created timestamp(6),
      last_updated timestamp(6),
      constraint pk_table1 primary key(id, name)
      using index tablespace users
    )
    comment on table table1 is 'comment';

    drop user d563 cascade;

::

    expdp d563/d563 dumpfile=SLMan.dmp logfile=SLMan.log schemas=users
    impdp sys/pass dumpfile=SLMan.dmp logfile=SLMan.log remap_tablespace=users:users

client
------
::

    rpm -ivh oracle-instantclient11.2-basic-11.2.0.4.0-1.i386.rpm
    rpm -ivh oracle-instantclient11.2-devel-11.2.0.4.0-1.i386.rpm

::

    export ORACLE_HOME=/usr/lib/oracle/11.2/client
    export PATH=$PATH:$ORACLE_HOME/bin
    export LD_LIBRARY_PATH=/usr/lib/oracle/11.2/client/lib

    sudo ln -s /usr/include/oracle/11.2/client /usr/lib/oracle/11.2/client/include
    echo '/usr/lib/oracle/11.2/client/lib/' > /etc/ld.so.conf.d/oracle.conf
    ldconfig

::

    pip install cx_Oracle

::

    python
    import cx_Oracle
    conn = cx_Oracle.connect('d563', 'd563', '(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521)(CONNECT_DATA=(SERVICE_NAME=XE)))')
    cur = conn.cursor()
    cur.execute('select * from dual')
    rows = cur.fetchall()
    for row in rows:
      print row[0]
    cur.close()
    conn.close()

