meteor
======
::

    curl https://install.meteor.com/ | sh

::

    cd /root/.meteor/packages/meteor-tool/*/*/dev_bundle/mongodb/bin
    mv mongod mongod_org
    cat << '[EOF]' > mongod
    $(cd $(dirname $0); pwd)/mongod_org $(echo $@ | sed -e 's/--bind_ip 127.0.0.1//')
    [EOF]
    chmod 775 mongod

::

    cd ~
    meteor create --list
    meteor create --example leaderboard
    cd leaderboard
    meteor

::

    mkdir server client lib
    meteor list
    meteor add meteorhacks:npm
    meteor add iron:router
    meteor

::

    echo '{ "mysql": "2.7.0"}' > packages.json

    vi leaderboard.js

::

    if (Meteor.isServer) {
      Meteor.methods({
        'reflesh': function(lst) {
          Players.remove({});
          _.each(lst, function(data) {
            Players.insert(data);
          });
        }
      });
      Meteor.startup(function() {
        console.log('start up');
        var mysql = Meteor.npmRequire('mysql');
        var con = mysql.createConnection({
          host: 'localhost',
          database: 'd563',
          user: 'SLMan',
          password: 'SLManPass'
        });
        con.query('select * from tbl1', Meteor.bindEnvironment(function(err, lst) {
          if (err) throw err;
          Meteor.call('reflesh', lst);
        }));
      });
    }
